<mat-sidenav-container>
  <mat-sidenav
    #sidenav
    mode="side"
    [(opened)]="sidebarOpened"
    class="custom-sidebar"
  >
  </mat-sidenav>
  <mat-sidenav-content>
    <div
      class="page-content-wrapper"
      leaflet
      [leafletOptions]="options"
      (leafletClick)="onMapClick($event)"
      (leafletMapReady)="onMapReady($event)"
      (leafletMapMoveEnd)="onMove($event)"
      (leafletMapZoomEnd)="onZoom($event)"
    ></div>
    <div class="row controls-row">
      <mat-form-field subscriptSizing="dynamic" class="dropdown-field">
        <mat-label>Variable Type</mat-label>
        <mat-select
          [(value)]="selectedVariableType"
          (selectionChange)="onVariableTypeChange()"
        >
          <mat-option
            *ngFor="let variableType of variableTypes"
            [value]="variableType"
            [disabled]="!availableVariableTypes.includes(variableType)"
            [class.disabled-option]="
              !availableVariableTypes.includes(variableType)
            "
          >
            {{ climateVariables[variableType].displayName }} ({{
              climateVariables[variableType].unit
            }})
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field subscriptSizing="dynamic" class="dropdown-field">
        <mat-label>Year Range</mat-label>
        <mat-select
          [(value)]="selectedYearRange"
          (selectionChange)="onYearRangeChange()"
        >
          <mat-option
            *ngFor="let yearRange of yearRanges; trackBy: trackByYearRange"
            [value]="yearRange"
            [disabled]="
              climateMaps.length > 0 && !availableYearRanges.includes(yearRange)
            "
            [class.disabled-option]="
              climateMaps.length > 0 && !availableYearRanges.includes(yearRange)
            "
          >
            {{ yearRange.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field subscriptSizing="dynamic" class="dropdown-field">
        <mat-label>Resolution</mat-label>
        <mat-select
          [(value)]="selectedResolution"
          (selectionChange)="onResolutionChange()"
        >
          <mat-option
            *ngFor="let resolution of resolutions"
            [value]="resolution"
            [disabled]="!availableResolutions.includes(resolution)"
            [class.disabled-option]="!availableResolutions.includes(resolution)"
          >
            {{ getResolutionDisplayName(resolution) }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field
        subscriptSizing="dynamic"
        class="dropdown-field"
        *ngIf="
          selectedYearRange && !isHistoricalYearRange(selectedYearRange.value)
        "
      >
        <mat-label>Climate Scenario</mat-label>
        <mat-select
          [(value)]="selectedClimateScenario"
          (selectionChange)="onClimateScenarioChange()"
        >
          <mat-option
            *ngFor="let scenario of climateScenarios"
            [value]="scenario"
            [disabled]="!availableClimateScenarios.includes(scenario)"
            [class.disabled-option]="
              !availableClimateScenarios.includes(scenario)
            "
          >
            {{ scenario }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field
        subscriptSizing="dynamic"
        class="dropdown-field"
        *ngIf="
          selectedYearRange && !isHistoricalYearRange(selectedYearRange.value)
        "
      >
        <mat-label>Climate Model</mat-label>
        <mat-select
          [(value)]="selectedClimateModel"
          (selectionChange)="onClimateModelChange()"
        >
          <mat-option
            *ngFor="let model of climateModels"
            [value]="model"
            [disabled]="!availableClimateModels.includes(model)"
            [class.disabled-option]="!availableClimateModels.includes(model)"
          >
            {{ model }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div
        class="checkbox-field"
        *ngIf="
          selectedYearRange && !isHistoricalYearRange(selectedYearRange.value)
        "
      >
        <mat-checkbox
          [(ngModel)]="showDifferenceMap"
          (change)="onDifferenceMapChange()"
          color="primary"
        >
          Show Difference
        </mat-checkbox>
      </div>
    </div>
    <div class="row">
      <div class="column">
        <app-month-slider
          (valueChange)="onMonthSelected($event)"
        ></app-month-slider>
      </div>
      <div class="column">
        <app-year-slider></app-year-slider>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
